<!DOCTYPE html>
<html lang="en-IE">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Create a new JSON Producer | smartesb-skeleton</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="Create a new JSON Producer" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Create a new JSON Producer" />
<meta property="og:description" content="Create a new JSON Producer" />
<link rel="canonical" href="http://localhost:4000/smartesb-skeleton/samples/jsonproducer" />
<meta property="og:url" content="http://localhost:4000/smartesb-skeleton/samples/jsonproducer" />
<meta property="og:site_name" content="smartesb-skeleton" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-11-20T16:21:11+00:00" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/smartesb-skeleton/samples/jsonproducer"},"@type":"BlogPosting","url":"http://localhost:4000/smartesb-skeleton/samples/jsonproducer","headline":"Create a new JSON Producer","dateModified":"2018-11-20T16:21:11+00:00","datePublished":"2018-11-20T16:21:11+00:00","description":"Create a new JSON Producer","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="/smartesb-skeleton/assets/css/syntax.css?v=1f75261804c34bea5c04afb0b19411974c18d8b5">
        <link rel="stylesheet" href="/smartesb-skeleton/assets/css/timeline.css">

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    </head>
    <body>
    <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="/smartesb-skeleton">SmartESB Skeleton</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="/smartesb-skeleton">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#"> </a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Introduction
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        
                            <a  class="dropdown-item" href="/smartesb-skeleton/introduction/installation">Installation and Setup Guide</a>
                        
                            <a  class="dropdown-item" href="/smartesb-skeleton/introduction/opensource">Introduction to the Smartbox Open Source Projects</a>
                        
                            <a  class="dropdown-item" href="/smartesb-skeleton/introduction/eip">Introduction to Enterprise Integration Patterns</a>
                        
                            <a  class="dropdown-item" href="/smartesb-skeleton/introduction/esb">Introduction to Enterprise Service Bus</a>
                        
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Samples
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        
                            <a class="dropdown-item" href="/smartesb-skeleton/samples/jsonproducer">Create a new JSON Producer</a>
                        
                            <a class="dropdown-item" href="/smartesb-skeleton/samples/syncflow">Create a new sync flow</a>
                        
                            <a class="dropdown-item" href="/smartesb-skeleton/samples/asyncflow">Create a new async flow</a>
                        
                            <a class="dropdown-item" href="/smartesb-skeleton/samples/workers">Set up workers to consume messages</a>
                        
                            <a class="dropdown-item" href="/smartesb-skeleton/samples/flowdiversion">Create a flow diversion</a>
                        
                            <a class="dropdown-item" href="/smartesb-skeleton/samples/broadcastflow">Create a new broadcast flow</a>
                        
                            <a class="dropdown-item" href="/smartesb-skeleton/samples/throttle">Throttle a flow</a>
                        
                            <a class="dropdown-item" href="/smartesb-skeleton/samples/freezeflows">Freeze flows</a>
                        
                            <a class="dropdown-item" href="/smartesb-skeleton/samples/callbackflow">Callback flow</a>
                        
                    </div>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Bundles
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        
                            <a class="dropdown-item" href="/smartesb-skeleton/bundles/corebundle">CoreBundle</a>
                        
                            <a class="dropdown-item" href="/smartesb-skeleton/bundles/camelconfig">CamelConfig</a>
                        
                            <a class="dropdown-item" href="/smartesb-skeleton/bundles/frameworkbundle">FrameworkBundle</a>
                        
                    </div>
                </li>
                <a class="nav-item nav-link" href="/smartesb-skeleton/roadmap">Roadmap</a>

            </ul>
        </div>
    </nav>
    <!-- Page Content -->
    <div id="page-content-wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-1">
                    <p> </p>
                </div>
                <div class="col-10">
                    <br><br><br>
                    <h1 id="create-a-new-json-producer">Create a new JSON Producer</h1>

<p>Here we will look at how we create a new producer, specifically a REST producer that will send JSON requests to a target system.
Please note that the code samples below are taken from what was built in the Skeleton Bundle. This should hopefully provide some consistency between the descriptions here and the actual code.</p>

<p>The main functionality for creating a producer is included in the Framework Bundle so our new producer will extend that class:
<code class="highlighter-rouge">use Smartbox\Integration\FrameworkBundle\Components\WebService\Rest\RestConfigurableProducer;</code></p>

<p>Here is what our new producer will look like: (<code class="highlighter-rouge">Producers/RemoteSystemApiProducer.php</code>)</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="k">namespace</span> <span class="nx">SmartboxSkeletonBundle\Producers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Smartbox\Integration\FrameworkBundle\Components\WebService\Rest\RestConfigurableProducer</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Smartbox\Integration\FrameworkBundle\Tools\SmokeTests\CanCheckConnectivityInterface</span><span class="p">;</span>

<span class="sd">/**
 * Class RemoteSystemApiProducer.
 */</span>
<span class="k">class</span> <span class="nc">RemoteSystemApiProducer</span> <span class="k">extends</span> <span class="nx">RestConfigurableProducer</span> <span class="k">implements</span> <span class="nx">CanCheckConnectivityInterface</span>
<span class="p">{</span>
    <span class="sd">/**
     * {@inheritdoc}
     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">checkConnectivityForSmokeTest</span><span class="p">(</span><span class="k">array</span> <span class="nv">$config</span> <span class="o">=</span> <span class="k">array</span><span class="p">())</span>
    <span class="p">{</span>
        <span class="c1">//not implemented for now
</span>    <span class="p">}</span>

    <span class="sd">/**
     * {@inheritdoc}
     */</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">getConnectivitySmokeTestLabels</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'important'</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<p>This, however, is not enough for the system to know how to route to this producer, hence we will need to add some configuration.
Firstly we should create a YAML configuration that will descrive the functions of the producer. 
In the Skeleton Bundle this is in the file: <code class="highlighter-rouge">app/config/producers/remote_system_api.yml</code>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 
 <span class="na">services</span><span class="pi">:</span>
     <span class="s">smartbox.clients.rest.remote_system_api</span><span class="pi">:</span>
         <span class="na">class</span><span class="pi">:</span> <span class="s">GuzzleHttp\Client</span>
         <span class="na">arguments</span><span class="pi">:</span> <span class="pi">[{</span><span class="nv">timeout</span><span class="pi">:</span> <span class="nv">0</span><span class="pi">,</span> <span class="nv">allow_redirects</span><span class="pi">:</span> <span class="nv">false</span><span class="pi">,</span> <span class="nv">verify</span><span class="pi">:</span> <span class="nv">false</span><span class="pi">}]</span>
         <span class="na">lazy</span><span class="pi">:</span> <span class="no">true</span>
         <span class="na">tags</span><span class="pi">:</span>
           <span class="pi">-</span> <span class="pi">{</span> <span class="nv">name</span><span class="pi">:</span> <span class="nv">mockable.rest_client</span><span class="pi">,</span> <span class="nv">mockLocation</span><span class="pi">:</span> <span class="s2">"</span><span class="s">external_system_response_cache_dir%/remoteSystemApi"</span> <span class="pi">}</span>
 
 <span class="na">smartbox_integration_framework</span><span class="pi">:</span>
     <span class="na">mappings</span><span class="pi">:</span>
         <span class="na">pingToRemoteApi</span><span class="pi">:</span>
             <span class="na">message</span><span class="pi">:</span> <span class="s">obj.getMessage()</span>
             <span class="na">time</span><span class="pi">:</span> <span class="s">obj.getTimestamp()</span>
     <span class="na">producers</span><span class="pi">:</span>
         <span class="na">remote_system_api</span><span class="pi">:</span>
             <span class="na">class</span><span class="pi">:</span> <span class="s">SmartboxSkeletonBundle\Producers\RemoteSystemApiProducer</span>
             <span class="na">description</span><span class="pi">:</span> <span class="s">producers to connection to a remote api</span>
             <span class="na">calls</span><span class="pi">:</span>
               <span class="pi">-</span> <span class="pi">[</span><span class="nv">setName</span><span class="pi">,</span> <span class="pi">[</span><span class="s1">'</span><span class="s">remote_system_api'</span><span class="pi">]</span> <span class="pi">]</span>
               <span class="pi">-</span> <span class="pi">[</span><span class="nv">setHttpClient</span><span class="pi">,</span> <span class="pi">[</span><span class="s1">'</span><span class="s">@smartbox.clients.rest.remote_system_api'</span><span class="pi">]</span> <span class="pi">]</span>
               <span class="pi">-</span> <span class="pi">[</span><span class="nv">setValidator</span><span class="pi">,</span> <span class="pi">[</span><span class="s1">'</span><span class="s">@validator'</span><span class="pi">]]</span>
               <span class="pi">-</span> <span class="pi">[</span><span class="nv">setHydrator</span><span class="pi">,[</span><span class="s1">'</span><span class="s">@smartcore.hydrator.group_version'</span><span class="pi">]</span> <span class="pi">]</span>
 
             <span class="na">options</span><span class="pi">:</span>
                 <span class="na">encoding</span><span class="pi">:</span> <span class="s">json</span>
                 <span class="na">base_uri</span><span class="pi">:</span> <span class="s1">'</span><span class="s">%remote_system_api.base.uri%'</span>
                 <span class="na">authentication</span><span class="pi">:</span> <span class="s1">'</span><span class="s">none'</span>
                 <span class="na">username</span><span class="pi">:</span> <span class="s1">'</span><span class="s">%remote_system_api.username%'</span>
                 <span class="na">password</span><span class="pi">:</span> <span class="s1">'</span><span class="s">%remote_system_api.password%'</span>
 
 
             <span class="na">methods</span><span class="pi">:</span>
                 <span class="na">sendPingMessage</span><span class="pi">:</span>
                     <span class="na">description</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Send</span><span class="nv"> </span><span class="s">ping</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">remote</span><span class="nv"> </span><span class="s">api'</span>
                     <span class="na">steps</span><span class="pi">:</span>
                       <span class="pi">-</span> <span class="na">define</span><span class="pi">:</span>
                           <span class="na">PingMessage</span><span class="pi">:</span> <span class="s2">"</span><span class="s">eval:</span><span class="nv"> </span><span class="s">body"</span>
                       <span class="pi">-</span> <span class="na">request</span><span class="pi">:</span>
                           <span class="na">name</span><span class="pi">:</span> <span class="s">sendPingMessage</span>
                           <span class="na">http_method</span><span class="pi">:</span> <span class="s">POST</span>
                           <span class="na">uri</span><span class="pi">:</span> <span class="s">/smartbox-skeleton/web/remote/pong</span>
                           <span class="na">body</span><span class="pi">:</span> <span class="s2">"</span><span class="s">eval:</span><span class="nv"> </span><span class="s">mapper.map(PingMessage,</span><span class="nv"> </span><span class="s">'pingToRemoteApi')"</span>
                           <span class="na">validations</span><span class="pi">:</span>
                               <span class="pi">-</span> <span class="na">rule</span><span class="pi">:</span> <span class="s2">"</span><span class="s">eval:</span><span class="nv"> </span><span class="s">responses['sendPingMessage']['statusCode']</span><span class="nv"> </span><span class="s">==</span><span class="nv"> </span><span class="s">200"</span>
                                 <span class="na">message</span><span class="pi">:</span> <span class="s2">"</span><span class="s">eval:</span><span class="nv"> </span><span class="s">'Enexpected</span><span class="nv"> </span><span class="s">response</span><span class="nv"> </span><span class="s">from</span><span class="nv"> </span><span class="s">Web</span><span class="nv"> </span><span class="s">Api:</span><span class="nv"> </span><span class="s">'</span><span class="nv"> </span><span class="s">~</span><span class="nv"> </span><span class="s">responses['sendPingMessage']['statusCode']"</span>
                                 <span class="na">recoverable</span><span class="pi">:</span> <span class="no">true</span>
                                 <span class="na">display_message</span><span class="pi">:</span> <span class="no">true</span>
                     <span class="na">response</span><span class="pi">:</span>
                         <span class="na">body</span><span class="pi">:</span> <span class="s2">"</span><span class="s">eval:</span><span class="nv"> </span><span class="s">responses['sendPingMessage']['body']"</span>

 
</code></pre></div></div>

<p>As you can see from looking at the YAML above, we have called our producer “remote_system_api” and link it to our PHP class on the line: <code class="highlighter-rouge">class: SmartboxSkeletonBundle\Producers\RemoteSystemApiProducer</code>.
 There are quite a number of configuations here but most noteworthy are the “mappings” and the “methods”. Once you have set up your producer and configuration, you will most likely use this two frequently to transform content and send it via different methods to different end points. 
 At the time of writing we only have one method defined, “sendPingMessage”. This method specifies where we are to send data and how.</p>

<p>The last peice of the pie is to specify a routing URI that will describe how we will route to our new producer. We have done this in the file: <code class="highlighter-rouge">app/config/routing_endpoints/routing_external_systems.yml</code>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="na">remote_system_api</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">rest://remote_system_api/{method}"</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_protocol</span><span class="pi">:</span> <span class="err">@</span><span class="s">smartesb.protocols.configurable.rest</span>
    <span class="na">_producer</span><span class="pi">:</span> <span class="err">@</span><span class="s">smartesb.producers.remote_system_api</span>
</code></pre></div></div>

<p>So, if we are defining a flow to send to our “sendPingMessage” method, we will route to the URI:
<code class="highlighter-rouge">rest://remote_system_api/sendPingMessage</code></p>

<p>The file “routing_external_systems.yml” is included in our file:  “routing_endpoints.yml”</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">external_systems</span><span class="pi">:</span>
    <span class="na">resource</span><span class="pi">:</span> <span class="s">routing_external_systems.yml</span>
    <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">requirements</span><span class="pi">:</span>
      <span class="na">method</span><span class="pi">:</span> <span class="s2">"</span><span class="s">[a-zA-Z0-9]+"</span>

</code></pre></div></div>

<p>which in turn is included in the following files:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>app/config/routing_endpoints_dev.yml

app/config/routing_endpoints_prod.yml

app/config/routing_endpoints_test.yml

</code></pre></div></div>
<p>by the line:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">imports</span><span class="pi">:</span>
    <span class="na">resource</span><span class="pi">:</span> <span class="s">routing_endpoints/routing_endpoints.yml</span>
</code></pre></div></div>

<p>The above files are loaded by the Framework Bundle in the config file: <code class="highlighter-rouge">/vendor/smartbox/integration-framework-bundle/Resources/config/routing.yml</code></p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="s">smartesb.router.endpoints</span><span class="pi">:</span>
      <span class="na">class</span><span class="pi">:</span> <span class="err">%</span><span class="s">smartesb.internal_router.class%</span>
      <span class="na">arguments</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s1">'</span><span class="s">@service_container'</span>
        <span class="pi">-</span> <span class="s2">"</span><span class="s">%kernel.root_dir%/config/routing_endpoints_%kernel.environment%.yml"</span>
        <span class="pi">-</span> <span class="err">%</span><span class="s">smartesb.router.endpoints.options%</span>
      <span class="na">tags</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="pi">{</span> <span class="nv">name</span><span class="pi">:</span> <span class="nv">monolog.logger</span><span class="pi">,</span> <span class="nv">channel</span><span class="pi">:</span> <span class="s2">"</span><span class="s">router.endpoints"</span> <span class="pi">}</span>
</code></pre></div></div>

<p>The Framework Bundle will handle the creation of our producer during the compiler pass. As for the routing, the Camel Config Bundle will create the routes that we can then specify in our XML, for example:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xmlns:camel=</span><span class="s">"http://camel.apache.org/schema/spring"</span> <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;camelContext</span> <span class="na">trace=</span><span class="s">"false"</span> <span class="na">xmlns=</span><span class="s">"http://camel.apache.org/schema/spring"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;route&gt;</span>
            <span class="nt">&lt;from</span> <span class="na">uri=</span><span class="s">"api://execute/skeleton/v0/ping"</span><span class="nt">/&gt;</span>
            <span class="nt">&lt;to</span> <span class="na">uri=</span><span class="s">"rest://remote_system_api/sendPingMessage"</span> <span class="nt">/&gt;</span>
        <span class="nt">&lt;/route&gt;</span>
    <span class="nt">&lt;/camelContext&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>

<p>With regard to the “mappings” section defined in the YAML configuation for the producer, this allows us to transform our Entity’s fields to meet the requirements of the remote systems API endpoint. 
In our example we have the following:</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
     <span class="na">pingToRemoteApi</span><span class="pi">:</span>
         <span class="na">message</span><span class="pi">:</span> <span class="s">obj.getMessage()</span>
         <span class="na">time</span><span class="pi">:</span> <span class="s">obj.getTimestamp()</span>
</code></pre></div></div>

<p>This mapping is refrerenced in the “request” part of of the “sendPingMessage” method:</p>

<p><code class="highlighter-rouge">body: "eval: mapper.map(PingMessage, 'pingToRemoteApi')"</code></p>

<p>However, if the remote endpoint expected the message to be named as “ping_message” we can easily match their expectation by altering our YAML configuration.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
     <span class="na">pingToRemoteApi</span><span class="pi">:</span>
         <span class="na">ping_message</span><span class="pi">:</span> <span class="s">obj.getMessage()</span>
         <span class="na">time</span><span class="pi">:</span> <span class="s">obj.getTimestamp()</span>
</code></pre></div></div>
<p>For another example, say that the target system requires the date in a particular format, we can do that transformation before we send it.</p>
<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
     <span class="na">pingToRemoteApi</span><span class="pi">:</span>
         <span class="na">ping_message</span><span class="pi">:</span> <span class="s">obj.getMessage()</span>
         <span class="na">time</span><span class="pi">:</span> <span class="s">mapper.formatDate('Y/m/d', obj.getTimestamp())</span>
</code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
     <span class="na">pingToRemoteApi</span><span class="pi">:</span>
         <span class="na">ping_message</span><span class="pi">:</span> <span class="s">obj.getMessage()</span>
         <span class="na">time</span><span class="pi">:</span> <span class="s">mapper.formatDate('Y/m/d H:i:s', obj.getTimestamp())</span>
</code></pre></div></div>

<p>Note that we can use the default Symfony Expression Language functions here and also custom expressions that have been added to the Framework Bundle:</p>

<p><code class="highlighter-rouge">/vendor/smartbox/integration-framework-bundle/Tools/Evaluator/ExpressionEvaluator.php</code></p>

<p>and</p>

<p><code class="highlighter-rouge">/vendor/smartbox/integration-framework-bundle/Tools/Evaluator/CustomExpressionLanguageProvider.php</code></p>

<p>Have a look at these classes to see what they have to offer.</p>


                </div>
                <div class="col-1">
                    <p> </p>
                </div>
            </div>
        </div>
    </div>
    </body>
</html>
